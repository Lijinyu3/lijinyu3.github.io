# 二项式定理

[toc]

---

高中数学二项式定理就没好好学，现在经常忘记二项式定理，因此写一篇博客把二项式定理完整复习一下。

## 1. 二项式定理的由来

二项式定理是用于展开n个二项式乘积的通用公式：
$$
(a+b)^n=(a+b)(a+b)\cdots(a+b).
$$

首先观察$(a+b)^n$在$n$较小时的结果：

$$
(a+b)^1 = a+b,\\
(a+b)^2 = a^2+2ab+b^2,\\
(a+b)^3 = a^3+3a^2b+3ab^2+b^3,\\
(a+b)^4 = a^4+4a^3b+6a^2b^2+4ab^3+b^4,\\
(a+b)^5 = a^5+5a^4b+10a^3b+10a^2b^3+5ab^4+b^5,\\
$$

只观察结果中的项，不难理解，n个(a+b)相乘，会出现a^n^和b^n^；对于中间的项，a和b的指数合为n，因为在n个(a+b)相乘的过程中，每一次要么选择与a相乘要么选择与b，不论选择与谁相乘，最终的相乘次数为n。而a^n^或b^n^是相乘过程的特殊情况，即每次都选择a或每次都选择b。

因此，对于二项式的n次方的结果为:

$$
(a+b)^n = \sum_{i=0}^n k_i\times a^ib^{n-1}
$$

那么对于每一项前的系数$k_i$是啥呢，要想理解这个，就必须先理解两个重要概念：排列数(Permutations)和组合数(Combinations)。但是要理解排列和组合前，我们还需要先了解阶乘(Factorial)。

## 2. 阶乘

如果n是一个正整数，那么n的阶乘$n!=1\cdot2\cdot3\cdots n=\prod_{i=1}^ni$。特别地，$0!=1$，原因等会儿会说。

通过阶乘，我们可以表示一段**连续的整数乘积**：

$$
(k+1)\cdot (k+2) \cdots n = \prod_{i=k+1}^ni = {1\cdot2\cdots n \over 1\cdot2\cdots k} = {\prod_{i=1}^ni \over \prod_{j=1}^{k}j} = {n! \over k!},\ if\ k < n. \\
i.e., \prod_{i=k+1}^ni={n!\over k!},\ if\ k<n.
$$

## 3. 排列

### 3.1. 全排列

给定n个不同的物体，求有多少种排列这n个物体的方式。这就是**排列问题**。

要求解这个问题，我们需要考虑，如果我们需要做两个连续且独立的决定，假设第一个决定d1有c1种选择，第二个决定d2有c2种选择。那么对于d1、d2两个决定整体来说，我们共有c1\*c2种选择。如，我们需要决定穿什么上衣和裤子，那么d1=穿什么上衣，d2=穿什么裤子；假设我们有c1件可选择的上衣，即d1有c1种选择，c2件可选择的裤子，即d2有c2种选择；那么最终对于决定穿什么上衣和裤子来说，我们共有c1\*c2种选择。这就是**乘法原理**：做一件事，如果需要n个步骤，每个步骤有mi种不同的方法，那么最终做完这件事有$\prod_{i=1}^nm_i$种不同的方法。

接下来，考虑排列问题。排列问题本质上就是决定这n个位置上选择什么物体，即做n次连续且独立的决定。对于d1来说，也就是决定第1个位置选择什么物体，很明显我们可以选择n个物体中任意一个，即c1=n；对于d2，因为d1已经选择了一个物体，那么我们就少了一个物体可供选择，c2=n-1；最终对于dn来说，只剩下一个物体可供选择，cn=1。

那么最终对于这个排列问题，我们有多少种选择方式（即排列方式）呢？$n(n-1)(n-2)\cdots2\cdot1=\prod_{i=1}^ni=n!$种。对于n个物体的这么多排列顺序来说，每一种顺序都叫做n个物体的一种**排列(Permutation)**。

$$
\text{The number of permutations of \textit{n} objects is \textit n!}.
$$

现在可以发现，n的阶乘其实就是n个物体的排列数量。那么不难理解，0的阶乘为啥是1了。1个物体的排列数量为1，因为只能选择1个物体；0个物体的排列数量依然为1，因为什么都没得选本身也是一种选择。

### 3.2. 非全排列

上面是有n个物体，求n个物体的排列。那么如果是n个物体，求n个物体中k个物体的排列方式呢(k <= n)？这叫做n个物体，一次取k个物体的排列，总数排列数表示为$P(n, k)$，或$A(n, k)$，其中P表示Permutations，A表示Arrangement。

解决办法同上，在选择k个位置的第1个位置时，我们有n个物体供选择，第2个位置n-1个物体，第k个位置（也就是最后一个位置），有n-(k-1) = n-k+1个物体供选择。根据乘法定理，

$$
P(n, k)=n(n-1)(n-2)\cdots(n-k+1)=\prod_{i=n-k+1}^ni={n!\over (n-k)!}
$$

## 4. 组合

在排列中，n个物体的位置很重要，但是如果我们不想考虑位置，只想考虑能选出多少种k个物体。这就是n个物体每次选择k个的组合。总组合数表示为$C(n, k)$，更多时候也表示为$\binom n k$。$\binom n k$也叫做**二项式系数(Binomial coefficients)**。原因稍后解释。

如何求出组合数呢，这就需要用到刚刚的排列了。组合与排列存在着一定的关系。对于n个物体选k个的排列数$P(n, k)$来说，其实就是求出有多少种选择这k个数的数量，而后再考虑有多少种给这k个数排列的数量。即，n中选k就是组合数$\binom n k$，而排列这k个数就是k的全排列$P(k, k)=k!$。因此：

$$
P(n, k)=\binom n k \cdot P(k, k) = \binom n k \cdot k! \\
C(n, k)=\binom n k = {P(n, k)\over k!}={{n!\over (n-k)!}\over k!}={n!\over k!\cdot(n-k)!}
$$

排列数还有一些有趣的性质：

$$
\binom n 0 = \binom n n = {n!\over 0!n!} = 1\\
\binom n 1 = \binom n {n-1} = {n!\over 1!(n-1)!} = n
$$

或者推广一下：

$$
\binom n k = \binom n {n-k} = {n!\over k!(n-k)!}
$$

这个性质不难从二项式定理公式上推导出来，更直观的理解为，在n个物体中选k个的选择，本质上就是在n个物体中选剩下的n-k个的选择。（n个物体减去你每个挑k个的每个组合，就是你每个挑n-k个的每个组合，这n-k个是你在不知不觉中挑好的）

## 5. 二项式定理

现在，我们终于可以回过头来讨论二项式定理中的系数k了。还记得我们推出：

$$
(a+b)^n = \sum_{i=0}^n k_i\times a^ib^{n-1}
$$

在这n个(a+b)相乘的过程中，可以理解为n次选择，每次都能选择a或者b。那么对于$k_i\cdot a^ib^{n-i}$来说，就是n次选择中i次选择了a，有多少种选法系数k就是多少（n-i次选择b结果一样，和上面二项式系数的性质一样，选择了i次a，自然也就是选择了n-i次b）。即$\binom n i$。将系数k代入二项式定理中：

$$
(a+b)^n=\sum_{i=0}^n{\binom n i \cdot a^ib^{n-1}} = \sum_{i=0}^n{{n!\over i!(n-i)!}\cdot a^ib^{n-i}}
$$
